{% extends "base.html" %}
{% load i18n plmapp_tags highlight %}

{# browse page #}

{% block css %}
{% endblock %}
{% block leftcolumn %} {% endblock %}

{% block content %}
    <div id="browser">
        <div id="type-panel">
            <div>
                <h3 class="alternate">{% trans "Type" %} </h3>
            </div>
            <ul>
                <li {% if type == "object"%}class="selected"{% endif %} >
                <a href="/browse/object/{% add_get page='1'%}"><span>{% trans "Objects" %}</span></a>
                </li>
                <li {% if type == "part"%}class="selected"{% endif %} >
                <a href="/browse/part/{% add_get page='1'%}"><span style="padding-left:1em;" >{% trans "Parts" %}</span></a>
                </li>
                <li {% if type == "topassembly"%}class="selected"{% endif %} >
                <a href="/browse/topassembly/{% add_get page='1'%}"><span style="padding-left:2em;" >{% trans "Top assemblies" %}</span></a>
                </li>
                <li {% if type == "document"%}class="selected"{% endif %} >
                <a href="/browse/document/{% add_get page='1'%}"><span style="padding-left:1em;" >{% trans "Documents" %}</span></a>
                </li>
                {% if not restricted %}
                    <li {% if type == "group"%}class="selected"{% endif %} >
                    <a href="/browse/group/{% add_get page='1'%}"><span>{% trans "Groups" %}</span></a></li>
                    <li {% if type == "user"%}class="selected"{% endif %} >
                    <a href="/browse/user/{% add_get page='1'%}"><span>{% trans "Users" %}</span></a>
                    </li>
                {% endif %}
            </ul>
            <hr/>
            <ul>
                <li>
                <a href="{% add_get sort='recently-used' %}"><span>{% trans "Recently added" %}</span></a>
                </li>
                <li>
                <a href="{% add_get sort='name' %}"><span>{% trans "Sorted by name" %}</span></a>
                </li>
                {% if type == "part" or type == "topassembly" %}
                    <li>
                    <a href="{% add_get sort='children' %}"><span>{% trans "Number of children" %}</span></a>
                    </li>
                {% endif %}
                {% if type == "part" %}
                    <li>
                    <a href="{% add_get sort='most-used' %}"><span>{% trans "Most used" %}</span></a>
                    </li>
                {% endif %}
                </ul>
            {% if plmobjects and not restricted %}
                <hr/>
                <ul>
                    <li>
                    <a href="{% add_get state='all' %}"><span>{% trans "All states" %}</span></a>
                    </li>
                    <li>
                    <a href="{% add_get state='official' %}"><span>{% trans "Official state" %}</span></a>
                    </li>
                    <li>
                    <a href="{% add_get state='published' %}"><span>{% trans "Published" %}</span></a>
                    <li>
                </ul>
            {% endif %}

        </div>
        <div id="browse-results">
            <h3>{% trans "Results" %}</h3>
            <div id="object_list">
                <p id="results">
                <span id="sort_method">
                    {% if sort == "name" %}
                        {% trans "Sorted by name" %}.
                    {% else %}
                        {% if type in "part topassembly" and sort == "children" %}
                            {% trans "Number of children" %}.
                        {% else %}
                            {% if type == "part" and sort == "most-used" %}
                                {% trans "Most used" %}.
                            {% else %}
                                {% trans "Recently added" %}.
                            {% endif %}
                        {% endif %}
                    {% endif %}
                </span>
                {% if plmobjects %}
                    <span id="state_filter">
                        {% if state == "official" %}
                            {% trans "Only official objects" %}.
                        {% else %}
                            {% if state == "published" %}
                                {% trans "Only published objects" %}.
                            {% else %}
                                {% trans "All objects"%}.
                            {% endif %}
                        {% endif %}
                    </span>
                {% endif %}
                {% trans "Results" %}
                <span id="numresults">
                    {% blocktrans with objects.start_index as start and objects.end_index as end and objects.paginator.count as total %}
                        ({{start}} - {{end}} on {{total}})
                    {% endblocktrans %}
                </span> 
                </p>

                {% with restricted|yesno:"public/," as suffix_url %}

                    {% for object in objects.object_list %}
                        {% if object.is_part %}

                            {% include "parts/identity_card.html" %}

                        {% else %}
                            {% if object.is_document %}
                                {% include "documents/identity_card.html" %}

                            {% else %}
                                {% if object.username %}
                                    {% include "users/identity_card.html" %}

                                {% else %}
                                    {% include "groups/identity_card.html" %}
                                {% endif %}

                            {% endif %}

                        {% endif %}

                    {% endfor %}
                {% endwith %}
            </div>

            {% include "snippets/pagination.html" %}
        </div>
    </div>
{% endblock %}
