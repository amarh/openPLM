{% extends "BaseDisplayHomePage.htm" %}
{% load i18n plmapp_tags highlight %}

<!-- Manage html display of the home page -->

{% block LoggedPersonBlock %}
    {% get_current_language as LANGUAGE_CODE %}
    <a href="/user/{{user}}/">{{user.get_full_name}}</a> | {{current_date|date:"D j N Y, G:i"}}
    <form id="SetLangForm" action="/i18n/setlang/" method="post">
        <select name="language">

            {% for lang in LANGUAGES %}
                <option value="{{ lang.0 }}" {% ifequal LANGUAGE_CODE lang.0 %} selected="selected"{% endifequal %} >
                {{ lang.1 }}
                </option>
            {% endfor %}
        </select>
        <input type="submit" class="{{"Button"|button}}" value="{% trans "Go" %}" />
    </form>
{% endblock %}

{% block SearchBlock %}
    <form id="search_form" method="get" action="." enctype="text/plain">
        <table id="search_table">
            {{type_form.as_table}}
            {{attributes_form.as_table}}
        </table>
        <div style="text-align:center"><input type="submit" class="{{"Button"|button}}" value="{% trans "SEARCH !" %}"/></div>
    </form>
{% endblock %}

{% block ResultBlock %}
    {% if link_creation %}
        {% trans "Results for link creation:" %}
    {% endif %}
    <ul class="Result">
        {% for result in results %}
            <li class="Result">
            <div class="reference">
                {{result.rendered|safe}}
                {% if navigate_bool %}
                    {% if result.object.is_part or result.object.is_document %}
                        <div class="toolbar">
                            <button class="attach">{% trans "Attach" %}</button>
                            <button class="add_child">{% trans "Add child" %}</button>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
            <div class="summary">
                {{ result.highlighted.text|safe }}
            </div>
            {% if link_creation or navigate_bool %}
                <form method="post" action="." enctype="multipart/form-data">
                    {{result.rendered_add|safe}}
                    {% if link_creation and result.object|can_add:attach %}
                        <input type="submit" class="{{"Button"|button}}" value="{% trans "ADD" %}"/>
                    {% endif %}
                </form>

            {% endif %}
            </li>

        {% empty %}
            <li>{% trans "No result matching given query" %}</li>
        {% endfor %}
    </ul>
{% endblock %}

{% block CreationBlock %}
    <form method="get" action="/object/create/" enctype="text/plain">
        <ul>
            {{type_form4creation.as_ul}}
            <li>
            <input type="submit" class="{{"Button"|button}}" value="{% trans "CREATE !" %}"/>
            </li>
            <li class="{{"Button"|button}}" id="ImportButton">
            <a href="/import/csv/">
                <span class="ui-button-text">{% trans "Import" %}</span>
            </a>
            </li>
            <li class="{{"Button"|button}}" id="ImportBOMButton">
            <a href="/import/bom/">
                <span class="ui-button-text">{% trans "Import a BOM" %}</span>
            </a>
            </li>
        </ul>
    </form>
{% endblock %}




