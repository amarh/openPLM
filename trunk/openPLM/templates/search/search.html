{% extends "base.html" %}
{% load i18n plmapp_tags highlight %}

{# search page #}

{% block css %}
    <link rel="stylesheet" type="text/css" href="/media/css/search.css" />
{% endblock %}
{% block leftcolumn %} {% endblock %}

{% block content  %}


    <form id="inline_search_form" method="get" action=".">
        {% for field in form %}
            {{ field }}
        {% endfor %}
        <input id="search_button" type="submit" class="{{"Button"|button}}" value="{% trans "SEARCH !" %}"/>
    </form>

    {% if query %}
        <h3>Results</h3>

        {% for result in page.object_list %}
            {% if forloop.first %}
                <p id="results">
                {% trans "Results" %}
                <span id="numresults">
                    {% blocktrans with page.start_index as start and page.end_index as end and paginator.count as total %}
                        ({{start}} - {{end}} on {{total}})
                    {% endblocktrans %}
                </span> 
                </p>
                <ul class="Result">
                {% endif %}

                {% include "search/result.html" %}
                {% if forloop.last %}
                </ul>
            {% endif %}


        {% empty %}
            <p>{% trans "No result matching given query" %}</p>
        {% endfor %}


        {% if page.has_previous or page.has_next %}
            <div>
                {% if page.has_previous %}
                    <a href="?q={{ query }}&amp;type={{ type }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>
                {% endif %}
                |
                {% if page.has_next %}
                    <a href="?q={{ query }}&amp;type={{ type }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>
                {% endif %}
            </div>
        {% endif %}
    {% else %}
        {# Show some example queries to run, maybe query syntax, something else? #}
    {% endif %}
{% endblock %}
