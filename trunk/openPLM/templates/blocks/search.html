{% load i18n plmapp_tags highlight %}
<div>
    <form id="search_form" method="get" action="." enctype="text/plain">
        <table id="search_table">
            {{search_form.as_table}}
        </table>
        <div style="text-align:center"><input id="search_button" type="submit" class="{{"Button"|button}}" value="{% trans "SEARCH !" %}"/></div>
    </form>
</div>


<hr/>
{% if link_creation %}
    {% trans "Results for link creation:" %}
{% endif %}
<div class="Result">
    {% for result in results %}

        {% if forloop.first %}
            <p>
            {% trans "Results" %}
            <span id="numresults">
                {% blocktrans with results|length as count and search_count as total %}
                    (1 - {{count}} on {{total}})
                {% endblocktrans %}
            </span> 
            </p>
            <ul class="Result">
            {% endif %}

            <li class="Result">
            {% if navigate_bool %}
                {% if result.object.is_part or result.object.is_document %}
                    <div class="toolbar">
                        <button class="attach">{% trans "Attach" %}</button>
                        <button class="add_child">{% trans "Add child" %}</button>
                    </div>
                {% endif %}
            {% endif %}
            <div class="reference">
                {{result.rendered|safe}}
            </div>
            <div class="summary">
                {{ result.highlighted.text|safe }}
            </div>
            {% if link_creation or navigate_bool %}
                <form method="post" action="." enctype="multipart/form-data">
                    {{result.rendered_add|safe}}
                    {% if link_creation and result.object|can_add:attach %}
                        <input type="submit" class="{{"Button"|button}}" value="{% trans "ADD" %}"/>
                    {% endif %}
                </form>

            {% endif %}
            </li>

            {% if forloop.last %}
            </ul>
        {% endif %}

    {% empty %}
        <p>{% trans "No result matching given query" %}</p>
    {% endfor %}
</div>
